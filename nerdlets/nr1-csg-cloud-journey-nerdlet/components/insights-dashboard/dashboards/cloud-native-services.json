{
    "dashboard_account_id": DEADBEEF,
    "filter": {
        "event_types": [
            "LoadBalancerSample",
            "FinanceSample",
            "BlockDeviceSample",
            "ApiGatewaySample",
            "DatastoreSample",
            "InfrastructureEvent"
        ],
        "filter_first": false,
        "key_names": []
    },
    "grid_column_count": 3,
    "icon": "bar-chart",
    "owner": {
        "email": "adasgupta@newrelic.com"
    },
    "title": "AWS Modernize",
    "widgets": [
        {
            "column": 1,
            "customizations": {
                "drilldown": {}
            },
            "event_types": [
                "FinanceSample"
            ],
            "facet": "provider.serviceName",
            "height": 1,
            "notes": null,
            "nrql": "SELECT latest(`provider.estimatedCharges.Maximum`) from FinanceSample where provider='BillingServiceCost'  since 1 day ago facet `provider.serviceName` limit 100",
            "process_as": "facet_bar_chart",
            "row": 1,
            "title": "Charges per service",
            "width": 1
        },
        {
            "column": 2,
            "customizations": {
                "drilldown": {}
            },
            "event_types": [
                "LoadBalancerSample"
            ],
            "facet": "awsRegion",
            "height": 1,
            "notes": null,
            "nrql": "SELECT sum(`provider.requestCount.Sum`) from LoadBalancerSample WHERE  provider  = 'Elb' FACET awsRegion",
            "process_as": "facet_bar_chart",
            "row": 1,
            "title": "ELB Requests per second, by region",
            "width": 1
        },
        {
            "column": 3,
            "customizations": null,
            "event_types": [
                "BlockDeviceSample"
            ],
            "facet": "displayName",
            "height": 1,
            "notes": null,
            "nrql": "select average(`provider.volumeWriteBytes.Average`) + average(`provider.volumeWriteBytes.Average`) from BlockDeviceSample WHERE provider = 'EbsVolume'  facet displayName TIMESERIES SINCE 1 day ago",
            "process_as": "faceted_line_chart",
            "row": 1,
            "title": "EBS Volume Consumed",
            "width": 1
        },
        {
            "column": 1,
            "customizations": null,
            "event_types": [
                "ApiGatewaySample"
            ],
            "facet": "displayName",
            "height": 1,
            "notes": null,
            "nrql": "SELECT average(`provider.5xxError.Sum`) AS Error5xx FROM ApiGatewaySample WHERE provider = 'ApiGatewayApi'  TIMESERIES FACET displayName SINCE 1565095188304 UNTIL 1565699988304",
            "process_as": "faceted_line_chart",
            "row": 2,
            "title": "API GW 5xx Errors",
            "width": 1
        },
        {
            "column": 2,
            "customizations": null,
            "event_types": [
                "InfrastructureEvent"
            ],
            "facet": null,
            "height": 1,
            "notes": null,
            "nrql": "SELECT * FROM InfrastructureEvent WHERE source LIKE 'aws/lambda%' SINCE 4 week ago",
            "process_as": "event_table",
            "row": 2,
            "title": "Lambda Events from Infra Agent",
            "width": 1
        },
        {
            "column": 3,
            "customizations": null,
            "event_types": [
                "DatastoreSample"
            ],
            "facet": null,
            "height": 1,
            "notes": null,
            "nrql": "SELECT average(`provider.consumedWriteCapacityUnits.Sum` / (`provider.provisionedWriteCapacityUnits.Average` * 60 * 5)) * 100 FROM DatastoreSample where provider = 'DynamoDbTable'  since 1 day ago timeseries 30 minutes",
            "process_as": "line_chart",
            "row": 2,
            "title": "DynamoDB - % of provisioned write consumed",
            "width": 1
        },
        {
            "column": 1,
            "customizations": null,
            "event_types": [
                "LoadBalancerSample"
            ],
            "facet": "displayName",
            "height": 1,
            "notes": null,
            "nrql": "SELECT sum(`provider.requestCount.Sum`) FROM LoadBalancerSample WHERE  provider = 'Alb' TIMESERIES FACET displayName SINCE 1565095119596 UNTIL 1565699919596",
            "process_as": "faceted_line_chart",
            "row": 3,
            "title": "ALB",
            "width": 1
        },
        {
            "column": 2,
            "customizations": null,
            "event_types": [
                "DatastoreSample"
            ],
            "facet": "entityName",
            "height": 1,
            "notes": null,
            "nrql": "SELECT average(`provider.bucketSizeBytes.Average`)/1000000000 from DatastoreSample WHERE provider = 'S3Bucket'  TIMESERIES 1 day FACET entityName SINCE 1 week ago until 1 day ago limit 5",
            "process_as": "faceted_line_chart",
            "row": 3,
            "title": "S3 - Top buckets by size (Gb)",
            "width": 1
        },
        {
            "column": 3,
            "customizations": null,
            "event_types": [
                "DatastoreSample"
            ],
            "facet": "displayName",
            "height": 1,
            "notes": null,
            "nrql": "SELECT average(`provider.writeIops.Average`) as 'Write Operations' From DatastoreSample WHERE provider = 'RdsDbInstance'  SINCE 6 hour ago TIMESERIES UNTIL 10 minutes ago facet displayName",
            "process_as": "faceted_line_chart",
            "row": 3,
            "title": "RDS - WrOPS",
            "width": 1
        },
        {
            "column": 1,
            "customizations": null,
            "event_types": [
                "BlockDeviceSample"
            ],
            "facet": "displayName",
            "height": 1,
            "notes": null,
            "nrql": "SELECT average(`provider.volumeReadOps.Sum`) + average(`provider.volumeWriteOps.Sum`) FROM BlockDeviceSample WHERE provider = 'EbsVolume'  FACET displayName TIMESERIES since 1 day ago",
            "process_as": "faceted_line_chart",
            "row": 4,
            "title": "EBS - Total Operations",
            "width": 1
        },
        {
            "column": 2,
            "customizations": null,
            "event_types": [
                "ServerlessSample"
            ],
            "facet": "awsRegion",
            "height": 1,
            "notes": null,
            "nrql": "SELECT average(`provider.concurrentExecutions.Average`) FROM ServerlessSample WHERE provider LIKE 'LambdaRegion'  FACET awsRegion SINCE 1 hour ago UNTIL 6 minutes ago TIMESERIES 5 minutes",
            "process_as": "faceted_line_chart",
            "row": 4,
            "title": "Concurrent Lambda executions",
            "width": 1
        }
    ]
}
